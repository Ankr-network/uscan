import{ay as U,az as F,aA as ae,d as j,s as H,aS as X,N as K,F as N,J as E,I as Z,aT as L,as as le,o as re,c as se,R as ie,f as $,Z as pe,Y as oe,L as J,aU as G,aV as ue,aW as me,y as D,j as ne,aj as ge,a as _,ac as M,aX as xe,au as we,aD as ye,aY as V,U as be,A as ke,B as Te,aM as de,$ as Ne,aZ as Pe,T as ce,a_ as Q,M as ze,a$ as ee,ak as Se,O as Ce,at as $e,W as Ee,a1 as Ie,a2 as Re}from"./index.75f5de9e.js";const W=Symbol("tabsRootContextKey"),Be=U({tabs:{type:F(Array),default:()=>ae([])}}),Oe={name:"ElTabBar"},Le=j({...Oe,props:Be,setup(e,{expose:n}){const C=e,y="ElTabBar",r=J(),x=H(W);x||X(y,"<el-tabs><el-tab-bar /></el-tabs>");const h=K("tabs"),b=N(),p=N(),d=()=>{let s=0,P=0;const u=["top","bottom"].includes(x.props.tabPosition)?"width":"height",i=u==="width"?"x":"y";return C.tabs.every(t=>{var m,v,z,I;const R=(v=(m=r.parent)==null?void 0:m.refs)==null?void 0:v[`tab-${t.paneName}`];if(!R)return!1;if(!t.active)return!0;P=R[`client${L(u)}`];const A=i==="x"?"left":"top";s=R.getBoundingClientRect()[A]-((I=(z=R.parentElement)==null?void 0:z.getBoundingClientRect()[A])!=null?I:0);const B=window.getComputedStyle(R);return u==="width"&&(C.tabs.length>1&&(P-=Number.parseFloat(B.paddingLeft)+Number.parseFloat(B.paddingRight)),s+=Number.parseFloat(B.paddingLeft)),!1}),{[u]:`${P}px`,transform:`translate${L(i)}(${s}px)`}},f=()=>p.value=d();return E(()=>C.tabs,async()=>{await Z(),f()},{immediate:!0}),le(b,()=>f()),n({ref:b,update:f}),(s,P)=>(re(),se("div",{ref_key:"barRef",ref:b,class:ie([$(h).e("active-bar"),$(h).is($(x).props.tabPosition)]),style:pe(p.value)},null,6))}});var Ae=oe(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const Fe=U({panes:{type:F(Array),default:()=>ae([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:F(Function),default:G},onTabRemove:{type:F(Function),default:G},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),te="ElTabNav",Me=j({name:te,props:Fe,setup(e,{expose:n}){const C=J(),y=H(W);y||X(te,"<el-tabs><tab-nav /></el-tabs>");const r=K("tabs"),x=ue(),h=me(),b=N(),p=N(),d=N(),f=N(!1),s=N(0),P=N(!1),u=N(!0),i=D(()=>["top","bottom"].includes(y.props.tabPosition)?"width":"height"),t=D(()=>({transform:`translate${i.value==="width"?"X":"Y"}(-${s.value}px)`})),m=()=>{if(!b.value)return;const a=b.value[`offset${L(i.value)}`],o=s.value;if(!o)return;const l=o>a?o-a:0;s.value=l},v=()=>{if(!b.value||!p.value)return;const a=p.value[`offset${L(i.value)}`],o=b.value[`offset${L(i.value)}`],l=s.value;if(a-l<=o)return;const k=a-l>o*2?l+o:a-o;s.value=k},z=async()=>{const a=p.value;if(!f.value||!d.value||!b.value||!a)return;await Z();const o=d.value.querySelector(".is-active");if(!o)return;const l=b.value,k=["top","bottom"].includes(y.props.tabPosition),w=o.getBoundingClientRect(),g=l.getBoundingClientRect(),S=k?a.offsetWidth-g.width:a.offsetHeight-g.height,T=s.value;let c=T;k?(w.left<g.left&&(c=T-(g.left-w.left)),w.right>g.right&&(c=T+w.right-g.right)):(w.top<g.top&&(c=T-(g.top-w.top)),w.bottom>g.bottom&&(c=T+(w.bottom-g.bottom))),c=Math.max(c,0),s.value=Math.min(c,S)},I=()=>{if(!p.value||!b.value)return;const a=p.value[`offset${L(i.value)}`],o=b.value[`offset${L(i.value)}`],l=s.value;if(o<a){const k=s.value;f.value=f.value||{},f.value.prev=k,f.value.next=k+o<a,a-k<o&&(s.value=a-o)}else f.value=!1,l>0&&(s.value=0)},R=a=>{const o=a.code,{up:l,down:k,left:w,right:g}=V;if(![l,k,w,g].includes(o))return;const S=Array.from(a.currentTarget.querySelectorAll("[role=tab]")),T=S.indexOf(a.target);let c;o===w||o===l?T===0?c=S.length-1:c=T-1:T<S.length-1?c=T+1:c=0,S[c].focus(),S[c].click(),A()},A=()=>{u.value&&(P.value=!0)},B=()=>P.value=!1;return E(x,a=>{a==="hidden"?u.value=!1:a==="visible"&&setTimeout(()=>u.value=!0,50)}),E(h,a=>{a?setTimeout(()=>u.value=!0,50):u.value=!1}),le(d,I),ne(()=>setTimeout(()=>z(),0)),ge(()=>I()),n({scrollToActiveTab:z,removeFocus:B}),E(()=>e.panes,()=>C.update(),{flush:"post"}),()=>{const a=f.value?[_("span",{class:[r.e("nav-prev"),r.is("disabled",!f.value.prev)],onClick:m},[_(M,null,{default:()=>[_(xe,null,null)]})]),_("span",{class:[r.e("nav-next"),r.is("disabled",!f.value.next)],onClick:v},[_(M,null,{default:()=>[_(we,null,null)]})])]:null,o=e.panes.map((l,k)=>{var w,g,S,T;const c=(g=(w=l.props.name)!=null?w:l.index)!=null?g:`${k}`,Y=l.isClosable||e.editable;l.index=`${k}`;const fe=Y?_(M,{class:"is-icon-close",onClick:O=>e.onTabRemove(l,O)},{default:()=>[_(ye,null,null)]}):null,ve=((T=(S=l.slots).label)==null?void 0:T.call(S))||l.props.label,he=l.active?0:-1;return _("div",{ref:`tab-${c}`,class:[r.e("item"),r.is(y.props.tabPosition),r.is("active",l.active),r.is("disabled",l.props.disabled),r.is("closable",Y),r.is("focus",P.value)],id:`tab-${c}`,key:`tab-${c}`,"aria-controls":`pane-${c}`,role:"tab","aria-selected":l.active,tabindex:he,onFocus:()=>A(),onBlur:()=>B(),onClick:O=>{B(),e.onTabClick(l,c,O)},onKeydown:O=>{Y&&(O.code===V.delete||O.code===V.backspace)&&e.onTabRemove(l,O)}},[ve,fe])});return _("div",{ref:d,class:[r.e("nav-wrap"),r.is("scrollable",!!f.value),r.is(y.props.tabPosition)]},[a,_("div",{class:r.e("nav-scroll"),ref:b},[_("div",{class:[r.e("nav"),r.is(y.props.tabPosition),r.is("stretch",e.stretch&&["top","bottom"].includes(y.props.tabPosition))],ref:p,style:t.value,role:"tablist",onKeydown:R},[e.type?null:_(Ae,{tabs:[...e.panes]},null),o])])])}}}),Ve=U({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:F(Function),default:()=>!0},stretch:Boolean}),q=e=>ke(e)||Te(e),De={[be]:e=>q(e),"tab-click":(e,n)=>n instanceof Event,"tab-change":e=>q(e),edit:(e,n)=>["remove","add"].includes(n),"tab-remove":e=>q(e),"tab-add":()=>!0};var Ue=j({name:"ElTabs",props:Ve,emits:De,setup(e,{emit:n,slots:C,expose:y}){var r,x;const h=K("tabs"),b=N(),p=de({}),d=N((x=(r=e.modelValue)!=null?r:e.activeName)!=null?x:"0"),f=t=>{d.value=t,n(be,t),n("tab-change",t)},s=async t=>{var m,v,z;if(!(d.value===t||Q(t)))try{await((m=e.beforeLeave)==null?void 0:m.call(e,t,d.value))!==!1&&(f(t),(z=(v=b.value)==null?void 0:v.removeFocus)==null||z.call(v))}catch{}},P=(t,m,v)=>{t.props.disabled||(s(m),n("tab-click",t,v))},u=(t,m)=>{t.props.disabled||Q(t.props.name)||(m.stopPropagation(),n("edit",t.props.name,"remove"),n("tab-remove",t.props.name))},i=()=>{n("edit",void 0,"add"),n("tab-add")};return E(()=>e.activeName,t=>s(t)),E(()=>e.modelValue,t=>s(t)),E(d,async()=>{var t;await Z(),(t=b.value)==null||t.scrollToActiveTab()}),Ne(W,{props:e,currentName:d,registerPane:v=>p[v.uid]=v,unregisterPane:v=>delete p[v]}),y({currentName:d}),()=>{const t=e.editable||e.addable?_("span",{class:h.e("new-tab"),tabindex:"0",onClick:i,onKeydown:z=>{z.code===V.enter&&i()}},[_(M,{class:h.is("icon-plus")},{default:()=>[_(Pe,null,null)]})]):null,m=_("div",{class:[h.e("header"),h.is(e.tabPosition)]},[t,_(Me,{ref:b,currentName:d.value,editable:e.editable,type:e.type,panes:Object.values(p),stretch:e.stretch,onTabClick:P,onTabRemove:u},null)]),v=_("div",{class:h.e("content")},[ce(C,"default")]);return _("div",{class:[h.b(),h.m(e.tabPosition),{[h.m("card")]:e.type==="card",[h.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[m,v]:[v,m]])}}});const je=U({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Ke=["id","aria-hidden","aria-labelledby"],We={name:"ElTabPane"},Ye=j({...We,props:je,setup(e){const n=e,C="ElTabPane",y=J(),r=ze(),x=H(W);x||X(C,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const h=K("tab-pane"),b=N(),p=D(()=>n.closable||x.props.closable),d=ee(()=>{var i;return x.currentName.value===((i=n.name)!=null?i:b.value)}),f=N(d.value),s=D(()=>{var i;return(i=n.name)!=null?i:b.value}),P=ee(()=>!n.lazy||f.value||d.value);E(d,i=>{i&&(f.value=!0)});const u=de({uid:y.uid,slots:r,props:n,paneName:s,active:d,index:b,isClosable:p});return ne(()=>{x.registerPane(u)}),Se(()=>{x.unregisterPane(u.uid)}),(i,t)=>$(P)?Ce((re(),se("div",{key:0,id:`pane-${$(s)}`,class:ie($(h).b()),role:"tabpanel","aria-hidden":!$(d),"aria-labelledby":`tab-${$(s)}`},[ce(i.$slots,"default")],10,Ke)),[[$e,$(d)]]):Ee("v-if",!0)}});var _e=oe(Ye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const He=Ie(Ue,{TabPane:_e}),Xe=Re(_e);export{Xe as E,He as a};
