import{b as e}from"../codemirror/codemirror.be15bd40.js";import{E as t,z as n,S as r,p as o,A as i,C as a,B as u,D as c}from"../@codemirror/@codemirror.e799033a.js";import{C as s,e as f,q as l,f as d,t as m,d as v,z as p,ai as b}from"../@vue/@vue.f5a41070.js";
/*!
* VueCodemirror v6.0.0
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon <https://github.com/surmon-china>
*/var g=Symbol("vue-codemirror-global-config"),y=function(){var e=new a;return{compartment:e,run:function(t,n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:r.appendConfig.of(e.of(n))})}}},O=function(){return y().run},h=function(e){var t=y(),n=t.compartment,r=t.run;return function(t,o){var i=n.get(t.state);r(t,(null!=o?o:i!==e)?e:[])}},j={autofocus:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},indentWithTab:{type:Boolean,default:void 0},tabSize:Number,placeholder:String,style:Object,root:Object,extensions:Array,selection:Object},w=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",extensions:[e]}),x=s({name:"VueCodemirror",props:Object.assign({modelValue:{type:String,required:!1,default:""}},j),emits:{"update:modelValue":function(e,t){return!0},change:function(e,t){return!0},update:function(e){return!0},focus:function(e){return!0},blur:function(e){return!0},ready:function(e){return!0}},setup:function(e,r){var a=f(),s={view:null,state:null},y=Object.assign(Object.assign({},w),l(g,{})),j=d((function(){return Object.keys(e).reduce((function(t,n){var r,o;return Object.assign(Object.assign({},t),((r={})[n]=null!==(o=e[n])&&void 0!==o?o:y[n],r))}),{})}));return m((function(){s.state=function(e){var r=e.config,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["config"]),i=Array.isArray(r.extensions)?r.extensions:[r.extensions];return t.create({doc:r.doc,selection:r.selection,extensions:i.concat([n.updateListener.of((function(e){o.onUpdate(e),e.docChanged&&o.onChange(e.state.doc.toString(),e),e.focusChanged&&(e.view.hasFocus?o.onFocus(e):o.onBlur(e))}))])})}({config:{doc:e.modelValue,selection:j.value.selection,extensions:y.extensions},onFocus:function(e){return r.emit("focus",e)},onBlur:function(e){return r.emit("blur",e)},onUpdate:function(e){return r.emit("update",e)},onChange:function(t,n){t!==e.modelValue&&(r.emit("update:modelValue",t,n),r.emit("change",t,n))}}),s.view=new n({state:s.state,parent:a.value,root:j.value.root});var f=O();v((function(){return e.extensions}),(function(e){return f(s.view,e||[])}),{immediate:!0});var l=h([n.editable.of(!1),t.readOnly.of(!0)]);v((function(){return j.value.disabled}),(function(e){return l(s.view,e)}),{immediate:!0});var d=h(o.of([i]));v((function(){return j.value.indentWithTab}),(function(e){return d(s.view,e)}),{immediate:!0});var m=O();v((function(){return j.value.tabSize}),(function(e){return m(s.view,function(e){return[t.tabSize.of(e),u.of(" ".repeat(e))]}(e))}),{immediate:!0});var p=O();v((function(){return j.value.placeholder}),(function(e){return p(s.view,function(e){return c(e)}(e))}),{immediate:!0});var b=O();v((function(){return j.value.style}),(function(e){return b(s.view,function(e){return n.theme({"&":Object.assign({},e)})}(e))}),{immediate:!0}),v((function(){return e.modelValue}),(function(e){var t,n;e!==s.view.state.doc.toString()&&(t=s.view,n=e,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n}}))})),j.value.autofocus&&s.view.focus(),r.emit("ready",Object.assign(Object.assign({},s),{container:a.value}))})),p((function(){s.view.destroy()})),function(){return b("div",{class:"v-codemirror",style:{display:"contents"},ref:a})}}});export{x as F};
