import{C as e,f as a,w as t}from"../element-plus/element-plus.e38f20bb.js";import{a as s}from"../axios/axios.21f17a99.js";import{a as o}from"../vue-router/vue-router.5c451dd1.js";import{_ as l,a as r}from"../../assets/index.a746f986.js";import{C as n,e as d,w as c,o as i,c as p,a as u,U as m,S as f,Q as v,am as y,an as h,a4 as b}from"../@vue/@vue.f5a41070.js";import"../@vueuse/@vueuse.daa6c377.js";import"../@element-plus/@element-plus.f4b8dd72.js";import"../lodash-es/lodash-es.e287ec0c.js";import"../dayjs/dayjs.b9cd4081.js";import"../aes-js/aes-js.d869e6a6.js";import"../@ctrl/@ctrl.17547d95.js";import"../@popperjs/@popperjs.f1fb8f77.js";import"../escape-html/escape-html.d572c0fd.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";const j=e=>(y("data-v-6f5d9eb5"),e=e(),h(),e),w={style:{"text-align":"center"}},x={class:"h3-title"},T=j((()=>u("div",{style:{display:"flex","justify-content":"center"}},[u("p",{style:{color:"#77838f",width:"50%"}}," The information you requested can be downloaded from this page. But before continuing please verify that you are not a robot by completing the captcha below. ")],-1))),g={style:{display:"flex","justify-content":"center"}},E=j((()=>u("p",null,"Export the earliest 5000 records starting from",-1))),_={style:{"margin-top":"20px"}},D=b("Download"),k=j((()=>u("div",{style:{display:"flex","justify-content":"center"}},[u("p",{style:{color:"#77838f",width:"50%"}},"Tip: To avoid the 30 secs timeout, please select a small Date range")],-1)));var C=l(n({__name:"ExportData",setup(l){const n=o(),y=d([0,0]),h=d(n.query.type),b=d(n.query.a),j=d("Transactions");document.title="Export Data | The "+r+" Explorer",c((()=>{switch(h.value){case"txns-erc20":j.value="ERC-20 Token Transfers";break;case"txns-erc721":case"txns-erc721":j.value="ERC-721 Token Transfers";break;case"txns-internal":j.value="Internal Transactions"}}));const C=async()=>{0!=y.value[0]&&0!=y.value[1]||(y.value[0]=Date.now()-6048e5,y.value[1]=Date.now());const e=parseInt(y.value[0]/1e3),a=parseInt(y.value[1]/1e3);s({method:"get",url:{}.VITE_BASE_URL+"/accounts/"+b.value+"/"+h.value+"/download?beginTime="+e+"&endTime="+a,responseType:"blob"}).then((e=>{const a=e.data;if(!a)return;const t=window.URL.createObjectURL(new Blob([a])),s=document.createElement("a");s.style.display="none",s.href=t,s.setAttribute("download","export-"+b.value+".xls"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(s.href),document.body.removeChild(s)})).catch((e=>{}))};return(s,o)=>{const l=e,r=a,n=t;return i(),p("div",null,[u("div",w,[u("h3",x,"Download Data("+m(j.value)+")",1),T,u("div",g,[f(n,{class:"box-card"},{default:v((()=>[E,f(l,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=e=>y.value=e),type:"datetimerange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"]),u("div",_,[f(r,{type:"primary",onClick:C},{default:v((()=>[D])),_:1})])])),_:1})]),k])])}}}),[["__scopeId","data-v-6f5d9eb5"]]);export{C as default};
