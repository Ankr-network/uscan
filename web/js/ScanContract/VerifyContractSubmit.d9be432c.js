import{u as e,l,A as a,z as t,m as s,f as u,B as i,x as n,y as d,r as o,s as r}from"../element-plus/element-plus.e38f20bb.js";import{C as p,e as c,X as v,aq as m,a0 as y,o as f,c as b,a as g,S as h,Q as V,am as k,an as _,L as j,u as C,y as w,P as S,J as z,ah as x,M as q,a3 as T,U as E,a4 as N}from"../@vue/@vue.f5a41070.js";import{a as U,u as R}from"../vue-router/vue-router.5c451dd1.js";import{G as A,S as I,b as L}from"../contractService/contractService.bcbb36e2.js";import{_ as M,a as P}from"../../assets/index.bb287700.js";import"../@vueuse/@vueuse.daa6c377.js";import"../@element-plus/@element-plus.f4b8dd72.js";import"../lodash-es/lodash-es.e287ec0c.js";import"../dayjs/dayjs.b9cd4081.js";import"../aes-js/aes-js.d869e6a6.js";import"../@ctrl/@ctrl.17547d95.js";import"../@popperjs/@popperjs.f1fb8f77.js";import"../escape-html/escape-html.d572c0fd.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../axios/axios.21f17a99.js";const F=e=>(k("data-v-39a231a6"),e=e(),_(),e),D=F((()=>g("div",{class:"sub-info"},[g("h3",{class:"h3-title"},"Verify & Publish Contract Source Code"),g("p",{class:"subtitle"},"Compiler Type: SINGLE FILE / CONCATENANTED METHOD")],-1))),O={class:"content-sub"},G=F((()=>g("p",{class:"subtitle1"},"Contract Source Code",-1))),J={style:{margin:"10px"}},B={class:"title-input"},H=F((()=>g("p",null,"Contract Name",-1))),Q={key:0,style:{color:"red"}},X=[F((()=>g("p",null,"Required",-1)))],Y={class:"title-input"},K=F((()=>g("p",null,"Contract Address",-1))),W={class:"title-input"},Z=F((()=>g("p",null,"Compiler",-1))),$={key:0,class:"title-input"},ee=F((()=>g("p",null,"Optimization",-1))),le={key:0,style:{margin:"10px"}},ae=F((()=>g("h4",null,"Enter the Solidity Contract Code below",-1))),te={key:1,style:{margin:"10px"}},se=F((()=>g("h4",null,"Please select the Standard-Input-Json (*.json) file to upload",-1))),ue=F((()=>g("div",null,[g("p",null,"Click button select file")],-1))),ie={style:{width:"30%"}},ne=N("Select a file"),de={key:0,style:{color:"red"}},oe=[F((()=>g("p",null,"Required",-1)))],re={key:0},pe=[F((()=>g("p",null,"No file selected",-1)))],ce={style:{margin:"10px","margin-top":"30px"}},ve=F((()=>g("p",null,"Misc Settings",-1))),me=F((()=>g("p",{style:{color:"#77838f"}},"(Runs, EvmVersion & License Type settings)",-1))),ye={key:0,class:"title-input"},fe=F((()=>g("p",null,"Runs",-1))),be={key:0,class:"title-input"},ge=F((()=>g("p",null,"EVM Version to target",-1))),he={class:"title-input"},Ve=F((()=>g("p",null,"LicenseType",-1))),ke={class:"button-content"},_e=N(" Verify and Publish "),je=N("Reset"),Ce=N("Return to main"),we={key:0,class:"submit-result"},Se={key:0,class:"subtitle"},ze=[F((()=>g("p",null,"Submitted, please wait for verification",-1)))],xe={key:1,class:"subtitle"},qe={key:1,class:"submit-result"},Te={key:0,class:"subtitle"},Ee={key:1,class:"subtitle"},Ne=N(" Verify fail! "),Ue={key:2,class:"subtitle"};var Re=M(p({__name:"VerifyContractSubmit",async setup(p){let k,_;document.title="Verify & Publish Contract Source Code | The "+P+" Explorer";const M=U(),F=R(),Re=M.query.a,Ae=c(""),Ie=c(!1),Le=M.query.cv,Me=c(parseInt(M.query.lictype)),Pe=M.query.ct,Fe=M.query.cf,De=c(0),Oe=c(0),Ge=c(""),Je="default",Be=c(!1),He=c(0),Qe=c(-1),Xe=c(""),Ye=v([]),Ke=c(!1),We=[];([k,_]=m((()=>A())),k=await k,_(),k).data.licenseTypes.forEach((e=>{We.push({value:e.id,label:e.name})}));const Ze=async()=>{if(Ke.value||Ie.value)return;Be.value=!0,He.value=0,""==Ae.value.trim()?Ie.value=!0:Ie.value=!1;const e=new FormData;e.append("contractAddress",Re),e.append("contractName",Ae.value),e.append("compilerType",Pe),e.append("compilerVersion",Le),e.append("compilerFileName",Fe),e.append("licenseType",Me.value),1==Ye.length&&e.append("file",Ye[0].raw,Ye[0].name),"solidity-single-file"==Pe?(e.append("sourceCode",Ge.value),e.append("optimization",De.value),e.append("runs",Oe.value)):0==Ye.length?Ke.value=!0:Ke.value=!1;const l=await I(Re,e);He.value=l.code,200==l.code?setTimeout((()=>{$e(l.data.id)}),5e3):(Xe.value=l.msg,Be.value=!1)},$e=async e=>{const l=await L(e);Qe.value=l.data.data,1==l.data.data&&F.push("/address/"+Re),Be.value=!1},el=e=>{e.length>1&&e.splice(0,1)},ll=()=>{F.go(0)},al=()=>{F.push("/verifyContract/input?a="+M.query.a)};return(p,c)=>{const v=e,m=l,k=a,_=t,U=s,R=u,A=i,I=n,L=d,P=y("router-link"),F=o,Fe=r;return f(),b("div",null,[D,g("div",O,[h(Fe,{style:{width:"100%"}},{default:V((()=>[h(F,null,{label:V((()=>[G])),default:V((()=>[g("div",J,[h(U,{gutter:10},{default:V((()=>[h(m,{span:7},{default:V((()=>[g("div",B,[H,h(v,{modelValue:Ae.value,"onUpdate:modelValue":c[0]||(c[0]=e=>Ae.value=e),size:"large"},null,8,["modelValue"]),Ie.value?(f(),b("div",Q,X)):j("",!0)])])),_:1}),h(m,{span:7},{default:V((()=>[g("div",Y,[K,h(v,{modelValue:C(Re),"onUpdate:modelValue":c[1]||(c[1]=e=>w(Re)?Re.value=e:null),size:"large",readonly:!0},null,8,["modelValue"])])])),_:1}),h(m,{span:7},{default:V((()=>[g("div",W,[Z,h(k,{modelValue:C(Le),"onUpdate:modelValue":c[2]||(c[2]=e=>w(Le)?Le.value=e:null),size:"large",style:{width:"100%"},disabled:""},null,8,["modelValue"])])])),_:1}),h(m,{span:3},{default:V((()=>["solidity-single-file"==C(Pe)?(f(),b("div",$,[ee,h(k,{modelValue:De.value,"onUpdate:modelValue":c[3]||(c[3]=e=>De.value=e),placeholder:"Select",size:"large",style:{width:"100%"}},{default:V((()=>[(f(),S(_,{key:1,label:"Yes",value:1})),(f(),S(_,{key:2,label:"No",value:0}))])),_:1},8,["modelValue"])])):j("",!0)])),_:1})])),_:1})]),"solidity-single-file"==C(M).query.ct?(f(),b("div",le,[ae,z(g("textarea",{class:"byte-codes-text",rows:"10",style:{"margin-top":"0px","background-color":"white"},"onUpdate:modelValue":c[4]||(c[4]=e=>Ge.value=e)},"\n            ",512),[[x,Ge.value]])])):(f(),b("div",te,[se,g("div",null,[g("div",null,[ue,g("div",ie,[h(A,{"auto-upload":!1,action:"Fake Action",accept:".json","on-change":el,"file-list":Ye},{default:V((()=>[h(R,null,{default:V((()=>[ne])),_:1})])),_:1},8,["file-list"]),Ke.value?(f(),b("div",de,oe)):j("",!0)]),0==Ye.length?(f(),b("div",re,pe)):j("",!0)])])])),g("div",ce,[h(L,null,{default:V((()=>[h(I,null,{title:V((()=>[ve,me])),default:V((()=>[g("div",null,[h(U,{gutter:10},{default:V((()=>[h(m,{span:8},{default:V((()=>[1==De.value?(f(),b("div",ye,[fe,h(v,{modelValue:Oe.value,"onUpdate:modelValue":c[5]||(c[5]=e=>Oe.value=e),modelModifiers:{number:!0},size:"large",oninput:"value=value.replace(/[^0-9]/g,'')"},null,8,["modelValue"])])):j("",!0)])),_:1}),h(m,{span:8},{default:V((()=>["solidity-single-file"==C(M).query.ct?(f(),b("div",be,[ge,h(k,{modelValue:Je,"onUpdate:modelValue":c[6]||(c[6]=e=>Je=e),size:"large",style:{width:"100%"},disabled:""})])):j("",!0)])),_:1}),h(m,{span:8},{default:V((()=>[g("div",he,[Ve,h(k,{modelValue:Me.value,"onUpdate:modelValue":c[7]||(c[7]=e=>Me.value=e),placeholder:"Select",size:"large",style:{width:"100%"}},{default:V((()=>[(f(),b(q,null,T(We,(e=>h(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])])),_:1})])),_:1})])])),_:1})])),_:1})]),g("div",ke,[h(R,{type:"primary",size:"large",onClick:Ze,loading:Be.value},{default:V((()=>[_e])),_:1},8,["loading"]),h(R,{type:"info",size:"large",onClick:ll},{default:V((()=>[je])),_:1}),h(R,{type:"info",size:"large",onClick:al},{default:V((()=>[Ce])),_:1})]),g("div",null,[-1==Qe.value?(f(),b("div",we,[He.value>=200&&He.value<=300?(f(),b("div",Se,ze)):-1==He.value?(f(),b("div",xe,[g("p",null,"Something wrong, "+E(Xe.value),1)])):j("",!0)])):(f(),b("div",qe,[1==Qe.value?(f(),b("div",Te,"Verify success!")):2==Qe.value?(f(),b("div",Ee,[Ne,h(P,{to:"/address/"+C(Re)},{default:V((()=>[N(" click this back contract "+E(C(Re))+" page ",1)])),_:1},8,["to"])])):0==p.submitRes?(f(),b("div",Ue,"Verify handling!")):j("",!0)]))])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-39a231a6"]]);export{Re as default};
