/*!
* VueCodemirror v6.0.0
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon <https://github.com/surmon-china>
*/
import{inject as e,defineComponent as t,ref as n,computed as o,onMounted as r,watch as i,onBeforeUnmount as u,h as a}from"vue";import{basicSetup as c}from"codemirror";import{EditorView as f,keymap as s,placeholder as l}from"@codemirror/view";import{EditorState as d,Compartment as m,StateEffect as v}from"@codemirror/state";import{indentWithTab as p}from"@codemirror/commands";import{indentUnit as b}from"@codemirror/language";var g=Symbol("vue-codemirror-global-config");var y=function(e){var t=e.config,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["config"]),o=Array.isArray(t.extensions)?t.extensions:[t.extensions];return d.create({doc:t.doc,selection:t.selection,extensions:o.concat([f.updateListener.of((function(e){n.onUpdate(e),e.docChanged&&n.onChange(e.state.doc.toString(),e),e.focusChanged&&(e.view.hasFocus?n.onFocus(e):n.onBlur(e))}))])})},O=function(){var e=new m;return{compartment:e,run:function(t,n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:v.appendConfig.of(e.of(n))})}}},h=function(){return O().run},w=function(e){var t=O(),n=t.compartment,o=t.run;return function(t,r){var i=n.get(t.state);o(t,(null!=r?r:i!==e)?e:[])}},j=function(e){return l(e)},x=function(){return[f.editable.of(!1),d.readOnly.of(!0)]},S=function(){return s.of([p])},C=function(e){return[d.tabSize.of(e),b.of(" ".repeat(e))]},V=function(e){return f.theme({"&":Object.assign({},e)})},z={autofocus:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},indentWithTab:{type:Boolean,default:void 0},tabSize:Number,placeholder:String,style:Object,root:Object,extensions:Array,selection:Object},B=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",extensions:[c]}),A=t({name:"VueCodemirror",props:Object.assign({modelValue:{type:String,required:!1,default:""}},z),emits:{"update:modelValue":function(e,t){return!0},change:function(e,t){return!0},update:function(e){return!0},focus:function(e){return!0},blur:function(e){return!0},ready:function(e){return!0}},setup:function(t,c){var s=n(),l={view:null,state:null},d=Object.assign(Object.assign({},B),e(g,{})),m=o((function(){return Object.keys(t).reduce((function(e,n){var o,r;return Object.assign(Object.assign({},e),((o={})[n]=null!==(r=t[n])&&void 0!==r?r:d[n],o))}),{})}));return r((function(){l.state=y({config:{doc:t.modelValue,selection:m.value.selection,extensions:d.extensions},onFocus:function(e){return c.emit("focus",e)},onBlur:function(e){return c.emit("blur",e)},onUpdate:function(e){return c.emit("update",e)},onChange:function(e,n){e!==t.modelValue&&(c.emit("update:modelValue",e,n),c.emit("change",e,n))}}),l.view=new f({state:l.state,parent:s.value,root:m.value.root});var e=h();i((function(){return t.extensions}),(function(t){return e(l.view,t||[])}),{immediate:!0});var n=w(x());i((function(){return m.value.disabled}),(function(e){return n(l.view,e)}),{immediate:!0});var o=w(S());i((function(){return m.value.indentWithTab}),(function(e){return o(l.view,e)}),{immediate:!0});var r=h();i((function(){return m.value.tabSize}),(function(e){return r(l.view,C(e))}),{immediate:!0});var u=h();i((function(){return m.value.placeholder}),(function(e){return u(l.view,j(e))}),{immediate:!0});var a=h();i((function(){return m.value.style}),(function(e){return a(l.view,V(e))}),{immediate:!0}),i((function(){return t.modelValue}),(function(e){e!==l.view.state.doc.toString()&&function(e,t){e.dispatch({changes:{from:0,to:e.state.doc.length,insert:t}})}(l.view,e)})),m.value.autofocus&&l.view.focus(),c.emit("ready",Object.assign(Object.assign({},l),{container:s.value}))})),u((function(){l.view.destroy()})),function(){return a("div",{class:"v-codemirror",style:{display:"contents"},ref:s})}}}),F=A,P=function(e,t){e.component(A.name,A),function(e,t){e.provide(g,t)}(e,t)},T={Codemirror:A,install:P};export{F as Codemirror,B as DEFAULT_CONFIG,T as default,P as install};
//# sourceMappingURL=vue-codemirror.esm.js.map
